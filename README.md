# MIPS32 Pipeline Processor Simulator

This project is a MIPS32 processor simulator implemented in a high-level programming language. The simulator is capable of executing programs written in MIPS32 assembly language with cycle-accurate precision. The processor implements a pipelined data path, as shown in the diagram below:

![Pipelined MIPS32 Processor Diagram](processor_diagram_.png)

The goal of this project was to implement the entire data path and control unit of the pipelined MIPS32 processor,including the Hazard Detection Unit and Forwarding Unit.

The project succefully implements the entire data path and control unit pipelined processor has a Hazard Detection Unit and Forwarding Unit. The simulator can incorporate these units to provide full functionality.

## Supported Instructions

The implemented processor supports a subset of the MIPS32 Instruction Set Architecture (ISA). The supported instructions are listed below:

1. add
2. addi
3. sub
4. and
5. or
6. xor
7. nor
8. slt
9. lw
10. sw
11. beq
12. bne
13. addiu
14. j
15. jal
16. jr
17. lui
18. sll
19. srl
20. sra
21. slti
22. sltu

Please note that the instructions j, jal, jr, and lui are ignored.

## Simulation Functionality and Inputs/Outputs

The simulator has the following functionality:

1. Accept an input file containing MIPS32 assembly code.
2. Execute each instruction sequentially, cycle by cycle.
3. Update the register file and main memory at the end of each cycle.
4. Print the values of specified monitor signals in each cycle, as shown in the diagram below:

![Monitor Signals](monitor_signals.png)

5. Additionally, for specific cycles, print the instruction in each pipeline stage (IF, ID, EX, MEM, WB). If there is a bubble in a stage, indicate it as "Bubble".
6. At the end of execution, generate an output file containing:
    - The contents of the register file, main memory, and monitor signals at specific clock cycles.
    - The instructions in each pipeline stage for the specified cycles.
    - The final contents of the register file and main memory.

Please refer to the provided diagrams and notes for more details on the simulation functionality and the format of the output file.

## Notes

- Monitors 27 and 28 in the diagram are specific to Exercise 4 and should be implemented. For Exercise 3, implement all other monitors except for 27 and 28.
- Monitors 27 and 28 are Boolean and can have values of either 0 or 1. For example, if the Hazard Detection Unit does not detect any hazards in a particular cycle, monitor 27 should indicate "Disabled".
- Register $gp (R28) should be initialized to the value 0x10008000, and register $sp (R29) to the value 0x7ffffffc.
- All the details of the data path and control unit of the pipelined MIPS32 processor are described in the provided notes.

## Usage

1. Clone or download the project repository.
2. Compile and run the MIPS32 processor simulator using `g++ -std=gnu++17 sim.cpp ./instruction/instruction.cpp ./Mips32/Mips32.cpp ./register_file/register_file.cpp ./label_struct/label_struct.cpp ./parser/parser.cpp ./assembler/assembler.cpp -o simulator.exe
`.
3. Provide an input file containing MIPS32 assembly code.
4. Run the simulator `.\simulator.exe .\InputFilename.s ./OutputFileName.txt`
4. Review the output file generated by the simulator for the register file, main memory, monitor signals, and pipeline stage instructions.

## Input and Output example
### Input
`.data
.text

main:

	ori $v0, $zero, 0x1
	ori $v1, $zero, 0x2
	ori $a0, $zero, 0x3
	ori $a1, $zero, 0x4
	ori $a2, $zero, 0x5
	ori $a3, $zero, 0x6
	ori $t0, $zero, 0x0`

### Output
`
-----Cycle: 1-----

PC: 0
IF:ori $v0, $zero, 0x1
 Registers:
zero: 0	at: 0	v0: 0	v1: 0	a0: 0	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 2-----

PC: 1
IF:ori $v1, $zero, 0x2
New PC: 2
ID:ori $v0, $zero, 0x1
 Registers:
zero: 0	at: 0	v0: 0	v1: 0	a0: 0	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 3-----

PC: 2
IF:ori $a0, $zero, 0x3
New PC: 4
ID:ori $v1, $zero, 0x2
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 1 Alu Result: 1 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 35 WB_rd: 20 MEM WTR: 64 WB WTR: 35
EX:ori $v0, $zero, 0x1
 Registers:
zero: 0	at: 0	v0: 0	v1: 0	a0: 0	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 4-----

PC: 3
IF:ori $a1, $zero, 0x4
New PC: 6
ID:ori $a0, $zero, 0x3
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 2 Alu Result: 2 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 2 WB_rd: 20 MEM WTR: 1 WB WTR: 35
EX:ori $v1, $zero, 0x2
AluResult:1
ME:ori $v0, $zero, 0x1
 Registers:
zero: 0	at: 0	v0: 0	v1: 0	a0: 0	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 5-----

AluResult:2
ME:ori $v1, $zero, 0x2
WB:ori $v0, $zero, 0x1
PC: 4
IF:ori $a2, $zero, 0x5
New PC: 8
ID:ori $a1, $zero, 0x4
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 3 Alu Result: 3 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 3 WB_rd: 2 MEM WTR: 1 WB WTR: 1
EX:ori $a0, $zero, 0x3
AluResult:2
ME:ori $v1, $zero, 0x2
 Registers:
zero: 0	at: 0	v0: 1	v1: 0	a0: 0	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 6-----

AluResult:3
ME:ori $a0, $zero, 0x3
WB:ori $v1, $zero, 0x2
PC: 5
IF:ori $a3, $zero, 0x6
New PC: 10
ID:ori $a2, $zero, 0x5
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 4 Alu Result: 4 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 4 WB_rd: 3 MEM WTR: 1 WB WTR: 1
EX:ori $a1, $zero, 0x4
AluResult:3
ME:ori $a0, $zero, 0x3
 Registers:
zero: 0	at: 0	v0: 1	v1: 2	a0: 0	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 7-----

AluResult:4
ME:ori $a1, $zero, 0x4
WB:ori $a0, $zero, 0x3
PC: 6
IF:ori $t0, $zero, 0x0
New PC: 12
ID:ori $a3, $zero, 0x6
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 5 Alu Result: 5 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 5 WB_rd: 4 MEM WTR: 1 WB WTR: 1
EX:ori $a2, $zero, 0x5
AluResult:4
ME:ori $a1, $zero, 0x4
 Registers:
zero: 0	at: 0	v0: 1	v1: 2	a0: 3	a1: 0	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 8-----

AluResult:5
ME:ori $a2, $zero, 0x5
WB:ori $a1, $zero, 0x4
PC: 7
IF:ori $t1, $zero, 0x1
New PC: 7
ID:ori $t0, $zero, 0x0
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 6 Alu Result: 6 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 6 WB_rd: 5 MEM WTR: 1 WB WTR: 1
EX:ori $a3, $zero, 0x6
AluResult:5
ME:ori $a2, $zero, 0x5
 Registers:
zero: 0	at: 0	v0: 1	v1: 2	a0: 3	a1: 4	a2: 0	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 9-----

AluResult:6
ME:ori $a3, $zero, 0x6
WB:ori $a2, $zero, 0x5
PC: 8
IF:ori $t2, $zero, 0x2
New PC: 9
ID:ori $t1, $zero, 0x1
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 0 Alu Result: 0 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 7 WB_rd: 6 MEM WTR: 1 WB WTR: 1
EX:ori $t0, $zero, 0x0
AluResult:6
ME:ori $a3, $zero, 0x6
 Registers:
zero: 0	at: 0	v0: 1	v1: 2	a0: 3	a1: 4	a2: 5	a3: 0	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:

-----Cycle: 10-----

AluResult:0
ME:ori $t0, $zero, 0x0
WB:ori $a3, $zero, 0x6
PC: 9
IF:ori $t3, $zero, 0x3
New PC: 11
ID:ori $t2, $zero, 0x2
EX_Stage:
sA: 0 InA: 0 sB: 0 inB: 1 Alu Result: 1 sB: 0 Register2Data: 0 WritetoMemData: 0
 MEM_rd: 8 WB_rd: 7 MEM WTR: 1 WB WTR: 1
EX:ori $t1, $zero, 0x1
AluResult:0
ME:ori $t0, $zero, 0x0
 Registers:
zero: 0	at: 0	v0: 1	v1: 2	a0: 3	a1: 4	a2: 5	a3: 6	t0: 0	t1: 0	t2: 0	t3: 0	t4: 0	t5: 0	t6: 0	t7: 0	s0: 0	s1: 0	s2: 0	s3: 0	s4: 0	s5: 0	s6: 0	s7: 0	t8: 0	t9: 0	k0: 0	k1: 0	gp: 10008000	sp: 7ffffffc	fp: 0	ra: 0	
 Memory:
`
